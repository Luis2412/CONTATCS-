import emoji
emoji
import validators
validators

contacts = {
  "K": {
      "Karina Cervantes": {
        "telefono": "+502 (805) 502-3648",
        "email": "karinacervantes@navir.com",
        "company": "NAVIR",
        "extra": "Lo conoci en , NAVIR No recuerdo exactamente cuando, 2 mensajes no le\u00eddos"
      }
    }
 
}
exit = False
def crearContacto():
    nombre_contact =input("Ingrese el nombre del nuevo contacto:\n")
    celular_contact = input("Ingrese el numero telefonoico del contacto:\n")
    correo_contact = input("Ingrese la direccion del correo electronico del contacto:\n")
    company_contact = input("Ingrese el nombre de la compañia del usuario:")
    resultemail = validators.email(correo_contact)
    if resultemail == True:
      contact={}
      data_contact = {}
      data_contact["telefono"]=celular_contact
      data_contact["email"]=correo_contact 
      data_contact["company"] = company_contact 
      print("Contacto creado EXITOSAMENTE!")
      contacts[nombre_contact[0:1]][nombre_contact]=data_contact
    else:
        print("Correo no valido. Intente de nuevo!")
    print("\n")

def editarContacto():
    nombre_contact = input("Ingrese el nombre del contacto que desea editar:\n")
    existe = nombre_contact in contacts
    if existe:
        editOptions = int(input(" 1.Editar Numero Telefonico \n 2.Editar Correo Electronico \n"))
        print(f"Ingrese lo que desea editar del contacto guardado como {nombre_contact}:")
        if editOptions == 1:
            celular_contact = input("Ingrese el numero telefonoico del contacto:\n")
        if editOptions == 2:
            correo_contact = input("Ingrese la direccion del correo electronico del contacto a añadir:\n")
        contacts[nombre_contact] = celular_contact

    else:
        print("El contacto no existe, intentelo de nuevo. \n")

def buscarContacto():
    nombre_contact = input("Ingrese el nombre del contacto que desea buscar:\n")
    existe = False 
    contact = {}
    nombre = ""
    for letra in contacts:
      for contacto in contacts[letra].keys():
        if nombre_contact in contacto: 
          nombre = contacto
          contact = contacts[letra][contacto] 
          existe = True  
    if existe == True:
      print(f"Nombre: {nombre}\nTelefono: {contact['telefono']}\nDireccion de correo: {contact['email']}")
    else:
      print("El contacto no existe, intentelo de nuevo. \n")

def eliminarContact():
    nombre_contact = input("Ingrese el nombre del contacto que desea eliminar:\n")
    existe = nombre_contact in contacts
    if existe:
        del contacts[nombre_contact]
        print("Contacto eliminado correctamente \n")
    else:
        print("El contacto no existe, intentelo de nuevo. \n")

def verContacts():
  lista_llaves = list(contacts.keys())
  lista_llaves.sort()
  print("-------CONTACTOS-------")
  for letra in lista_llaves:
    contador = 1
    print("- "+letra)
    for contacto in contacts[letra].keys():
      print(f"\t {contador}. {contacto}")
      contador = contador + 1
  print("-----------------------")
      

def CallContact():
    nombre_contact = input("Ingrese el nombre del contacto que desea llamar:\n")
    existe = False 
    contact = {}
    for letra in contacts:
      for contacto in contacts[letra].keys():
        if nombre_contact == contacto:
          contact = contacts[letra][contacto] 
          existe = True  
    if existe == True:
      print(f"Llamanado a {nombre_contact} al numero de telefono {contact['telefono']}", emoji.emojize(":telephone_receiver:"))
    else:
      print("El contacto no existe, intentelo de nuevo. \n")

def MsgContact():
    nombre_contact = input("Ingrese el contacto al que desea enviar un mensaje de texto: ")
    existe = nombre_contact in contacts
    if existe:
        msg = input(f"Ingrese el mensaje de texto que desea enviar al {contacts[nombre_contact]}: \n")
        print("MENSAJE DE TEXTO ENVIADO!", emoji.emojize(":beginner:"))
    else:
        print("El contacto no existe, intentelo de nuevo!")

def mailContact():
    nombre_contact = input("Ingrese el contacto al que desea enviar un mensaje de texto: ")
    existe = nombre_contact in contacts
    if existe:
        mail = input(f"Ingrese el mail que desea enviar a: \n")
        print("EMAIL ENVIADO DE FORMA EXITOSA!", emoji.emojize(":email:"))







while not exit:
    print("_____________________")
    print("    CONTACTS MENU    ")
    print("---------------------")
    menu = int(input(" 1. Crear Contacto\n 2. Editar Contacto \n 3. Buscar Contacto \n 4. Listar Contactos \n 5. Eliminar Contacto \n 6. Llamar Contacto \n 7. Enviar Mensaje a Contacto \n 8. Enviar Correo a Contacto \n 10.Exportar Contactos \n 11.Salir\n Ingrese la opcion que desea ejecutar:"))
    if menu == 1:
        crearContacto()
    if menu == 2:
        editarContacto()
    if menu == 3:
        buscarContacto()
    if menu== 4:
        verContacts()
    if menu== 5:
        eliminarContact()
    if menu== 6:
        CallContact()
    if menu == 7:
        MsgContact()
    if menu == 8:
        mailContact()
    elif menu == 9:
        exit = True
